\documentclass{cms-kurs}

\usepackage{tikz}
\tikzset{
  commit/.style={draw=green!80!black,fill=green!80!white,circle,very thick},
  pred/.style={<-,very thick,>=stealth}
}

\title{In-Depth: git}
\author{dbo}
\date{2018-09-08}

\AtBeginSection{%
  \begin{frame}
    \frametitle{Übersicht}
    \tableofcontents[currentsection]{}
  \end{frame}
}

\begin{document}

\begin{frame}
  \frametitle{Übersicht}
  \tableofcontents{}
\end{frame}

\begin{frame}
  \frametitle{Ziele}

  \onslide<+->

  \begin{itemize}
  \item git verstehen und sicher benutzen
  \item Fokus auf Versionkontrolle von \LaTeX{}
  \item Arbeit mit der Kommandozeile
  \item Arbeit mit github (gitlab, …)
  \end{itemize}

\end{frame}

\section{Grundlegende Arbeitsweise}

\begin{frame}[fragile]
  \frametitle{Commits}

  \onslide<+->

  \begin{itemize}
  \item git sammelt zusammengehörige Änderungen in einem \emph{Commit}
  \item Commits verweisen auf Vorgängern (meistens einer, manchmal zwei oder
    mehr; selten keiner)
  \item Commits werden durch ihren SHA-1 Wert eindeutig identifiziert
  \item Commits mit \enquote{Namen} heißen \emph{Branches}
  \end{itemize}

  \begin{center}
    \begin{tikzpicture}
      \path
      node[commit] (root) {}
      node[commit,right=of root] (1) {}
      node[commit,right=of 1] (2) {}
      node[commit,above right=of 2] (3) {}
      node[commit,right=of 3] (4) {}
      node[commit,below right=of 2] (5) {}
      node[commit,label={right:master},below right=of 4] (6) {}
      node[commit,label={right:dev}] (7) at (5 -| 6) {}
      (root) edge[pred] (1)
      (1) edge[pred] (2)
      (2) edge[pred] (3)
      (3) edge[pred] (4)
      (2) edge[pred] (5)
      (4) edge[pred] (6)
      (5) edge[pred] (6)
      (5) edge[pred] (7)
      ;
    \end{tikzpicture}
  \end{center}

\end{frame}

\begin{frame}
  \frametitle{Index und Working Tree}

  \onslide<+->

  \begin{block}{Working Tree}
    \begin{itemize}
    \item Dateien, an denen aktuell Änderungen vorgenommen werden können
    \item \emph{HEAD} zeigt auf den aktuell ausgecheckten Commit; Dateien des
      Working Tree basieren auf diesem Commit
    \item Ein Repository kann mehr als einen Working Tree haben
      (→ \gitcmd{worktree})
    \end{itemize}
  \end{block}

  \medskip{}

  \begin{block}{Index}
    \begin{itemize}
    \item Ansammlung von Änderungen für den nächsten Commit
    \item Änderungen in einer Datei können unabhängig voneinander in den Index
      aufgenommen werden
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Struktur eines Repositories}

  \onslide<+->

\begin{verbatim}
$ ls -F .git
branches/       HEAD    logs/        refs/
COMMIT_EDITMSG  hooks/  MERGE_RR     rr-cache/
config          index   objects/
description     info/   packed-refs
\end{verbatim}

\end{frame}

\begin{frame}
  \frametitle{Dokumentation}

  \onslide<+->

  \begin{itemize}
  \item Direkter Aufruf, z.B.{} \gitcmd{add --help}
  \item Manpages: \lstinline{man gittutorial}
  \item Website: \url{https://git-scm.com}
  \item Pro-Git: \url{https://git-scm.com/book/en/v2}
  \end{itemize}

\end{frame}

\section{Standard Porcelain Commands}

\begin{frame}
  \frametitle{Repositories verwalten}

  \onslide<+->

  \gitcmd{clone}, \gitcmd{config}, \gitcmd{remote}

\end{frame}

\begin{frame}
  \frametitle{Verwaltung des Index}

  \onslide<+->

  \TODO{Was Titel sagt}

\end{frame}

\begin{frame}
  \frametitle{Commits}

  \onslide<+->

  \TODO{Was Titel sagt}

\end{frame}

\begin{frame}
  \frametitle{Logs}

  \onslide<+->

  \TODO{Was Titel sagt}

\end{frame}

\begin{frame}
  \frametitle{Online-Synchronisation}

  \onslide<+->

  \TODO{\gitcmd{pull}, \gitcmd{fetch}, \gitcmd{pull}, \gitcmd{merge},
    \gitcmd{rebase}}

\end{frame}

\begin{frame}
  \frametitle{Offline-Synchronisation}

  \onslide<+->

  \TODO{\gitcmd{format-patch}, \gitcmd{am}}

\end{frame}

\begin{frame}
  \frametitle{Merging}

  \onslide<+->

  \TODO{Was Titel sagt}

\end{frame}

\section{Konfiguration}

\begin{frame}
  \frametitle{Wo ist was?}

  \onslide<+->

  \TODO{Konfigurationsdatei erläutern, Beispiele zeigen und sowas}

\end{frame}

\section{GitHub}

\begin{frame}
  \frametitle{Cloning, Commenting, und Pull Requests}

  \onslide<+->

  \TODO{Was Titel sagt}

\end{frame}

\end{document}